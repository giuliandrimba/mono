/**
*
*   Classy.js
*   @version: 0.5.5
*
*   Object-Oriented mini-framework for JavaScript
*   https://github.com/foo123/classy.js
*
**/!function(e,t,n,r,o){var i="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,l=i||"undefined"==typeof navigator?0:1,a="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,u=Array,c=u.prototype,f=function(){var e=null;if(i)return e=__filename,{path:__dirname,file:__filename};if(a)e=self.location.href;else if(l){var t;(t=document.getElementsByTagName("script"))&&t.length&&(e=t[t.length-1].src)}return e?{path:e.split("/").slice(0,-1).join("/"),file:e}:{path:null,file:null}},s=f(),p=function(e,t){if(i)return t;if("."==t.charAt(0)){e=e.split("/"),t=t.split("/");var n,r=0,o=0,l=t.length,a=e.length;for(n=0;l>n;n++)if(/^\.\./.test(t[n]))r++,o++;else{if(!/^\./.test(t[n]))break;o++}r=r>=a?0:a-r,t=e.slice(0,r).concat(t.slice(o)).join("/")}return t};n=n?[].concat(n):[];var b,d,y,g=n.length,v=new u(g),m=new u(g),h=new u(g),w=new u(g);for(b=0;g>b;b++)v[b]=n[b][0],m[b]=n[b][1],h[b]=/\.js$/i.test(m[b])?p(s.path,m[b]):p(s.path,m[b]+".js");if("object"==typeof module&&module.exports){if(o===module.exports[t]){for(b=0;g>b;b++)w[b]=module.exports[v[b]]||require(h[b])[v[b]];d=r.apply(e,w),module.exports[t]=d||1}}else if("function"==typeof define&&define.amd)define(["exports"].concat(m),function(n){if(o===n[t]){for(var i=c.slice.call(arguments,1),l=i.length,a=0;l>a;a++)w[a]=n[v[a]]||i[a];d=r.apply(e,w),n[t]=d||1}});else if(a){for(b=0;g>b;b++)self[v[b]]||importScripts(h[b]),w[b]=self[v[b]];d=r.apply(e,w),self[t]=d||1}else if(o===e[t]){var j=function(e,t){y=y||document.getElementsByTagName("head")[0];var n=0,r=document.createElement("script");r.type="text/javascript",r.language="javascript",r.src=e,r.onload=r.onreadystatechange=function(){n||r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(n=1,r.onload=r.onreadystatechange=null,y.removeChild(r),r=null,t&&t())},y.appendChild(r)},E=function(t,n,r){e[t]?r():j(n,r)},x=function(n){return function(){g>n&&(w[n]=e[v[n]]),++n<g?E(v[n],h[n],x(n)):(d=r.apply(e,w),e[t]=d||1)}};g?E(v[0],h[0],x(0)):(d=r.apply(e,w),e[t]=d||1)}}(this,"Classy",null,function(){var e={};return function(e,t){var n=function(e,t,n){this.v=e||null,this.prev=t||null,this.next=n||null};n.prototype={constructor:n,v:null,prev:null,next:null};var r=Array.prototype,o=Object.prototype,i=Function.prototype,l=i.call.bind(r.slice),a=i.call.bind(o.toString),u=i.call.bind(o.hasOwnProperty),c=i.call.bind(o.propertyIsEnumerable),f=Object.keys,s=Object.defineProperty,p=2,b=3,d=4,y=8,g=9,v=16,m=32,h=64,w=128,j=256,E=512,x=1024,_=function(e){var t=typeof e,n=a(e);return"undefined"===t?E:"number"===t||e instanceof Number?isNaN(e)?b:p:null===e?j:!0===e||!1===e?d:e&&("string"===t||e instanceof String)?1===e.length?g:y:e&&("[object Array]"===n||e instanceof Array)?v:e&&("[object RegExp]"===n||e instanceof RegExp)?w:e&&("function"===t&&"[object Function]"===n||e instanceof Function)?h:e&&"[object Object]"===n?m:x},O=function(e,t){var n,r=t.length,o=[].concat(e);for(n=0;r>n;n++)o.indexOf(t[n])>-1||o.push(t[n]);return o},N=function(e,t){if(m!==_(e))throw new TypeError("bad desc");var n={};if(u(e,"enumerable")&&(n.enumerable=!!t.enumerable),u(e,"configurable")&&(n.configurable=!!t.configurable),u(e,"value")&&(n.value=t.value),u(e,"writable")&&(n.writable=!!e.writable),u(e,"get")){var r=e.get;if(h!==_(r)&&"undefined"!==r)throw new TypeError("bad get");n.get=r}if(u(e,"set")){var o=e.set;if(h!==_(o)&&"undefined"!==o)throw new TypeError("bad set");n.set=o}if(("get"in n||"set"in n)&&("value"in n||"writable"in n))throw new TypeError("identity-confused descriptor");return n},T=Object.defineProperties||function(e,t){if("object"!=typeof e||null===e)throw new TypeError("bad obj");t=Object(t);for(var n=f(t),r=[],o=0;o<n.length;o++)r.push([n[o],N(t[n[o]],e)]);for(var o=0;o<r.length;o++)s(e,r[o][0],r[o][1]);return e},S=Object.create||function(e,t){var n,r=function(){};return r.prototype=e,n=new r,n.__proto__=e,"object"==typeof t&&T(n,t),n},A=function(e){var t=new n(e);return function(e){if(e&&t&&t.v){var r,o=this;if(e="constructor"==e?t.v:t.v.prototype[e])return t=new n(t.v.$super,t),r=e.apply(o,l(arguments,1)),t=t.prev,r}}},C=function(){var e,t,n,r,o,i,a,f=l(arguments);for(t=f.shift()||{},e=f.length,i=0;e>i;i++)if(n=f[i],m===_(n))for(o in n)u(n,o)&&c(n,o)&&(r=n[o],a=_(r),t[o]=p&a?0+r:(y|v)&a?r.slice(0):r);return t},R=function(e,n){e=e||Object,n=n||{};var r,o,i,l,a,c,s,b,d=null,g=e.$static||null;if(u(n,"constructor")?o=n.constructor:(r=function(){},n.constructor=o=r),u(n,"__static__")&&(d=n.__static__,delete n.__static__,g=O(g||[],f(d))),o.prototype=S(e.prototype),o.prototype=C(o.prototype,n),T(o.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0},$class:{value:o,enumerable:!1,writable:!0,configurable:!0},$super:{value:A(e),enumerable:!1,writable:!0,configurable:!0}}),T(o,{$super:{value:e,enumerable:!1,writable:!0,configurable:!0},$static:{value:g,enumerable:!1,writable:!0,configurable:!0}}),g){for(l=g.length,a={},i=0;l>i;i++)c=g[i],s=null,d&&t!==d[c]?s=d[c]:t!==e[c]&&(b=_(e[c]),s=m===b?C(null,e[c]):(y|v)&b?e[c].slice(0):p&b?0+e[c]:e[c]),a[c]={value:s,enumerable:!1,writable:!0,configurable:!0};T(o,a)}return o},I=Mixin=C,M=function(){var e=l(arguments),t=e.length,n=null;if(t>=2){var r=_(e[0]);r=h===r?{Extends:e[0]}:m===r?e[0]:{Extends:Object};var o,i,a=e[1]||{},u={},c=r.Extends||r.extends||Object,f=r.Implements||r.implements,s=r.Mixin||r.mixin;if(f=f?[].concat(f):null,s=s?[].concat(s):null)for(o=0,i=s.length;i>o;o++)s[o].prototype&&(u=Mixin(u,s[o].prototype));if(f)for(o=0,i=f.length;i>o;o++)f[o].prototype&&(u=I(u,f[o].prototype));n=R(c,C(u,a))}else n=R(Object,e[0]);return n};e.Classy={VERSION:"0.5.5",T:{UNDEFINED:E,NULL:j,BOOLEAN:d,STRING:y,NUMBER:p,NAN:b,FUNCTION:h,REGEXP:w,ARRAY:v,OBJECT:m},Type:_,Create:S,Merge:C,Implements:I,Mixin:Mixin,Extends:R,Static:function(e){return e},Class:M}}(e),e.Classy});
/**
*
*   MOD3.js
*   @version: 0.4
*   @dependencies: Classy.js
*
*   MOD3 3D Modifier Library for JavaScript 
*   port of AS3DMod ActionScript3 library (http://code.google.com/p/as3dmod/)
*   https://github.com/foo123/MOD3
*
**/!function(t,i,e,s,n){e=e?[].concat(e):[];var r,h,o=Array,a=o.prototype,u=e.length,l=new o(u);if("object"==typeof module&&module.exports){if(n===module.exports[i]){for(r=0;u>r;r++)l[r]=module.exports[e[r][0]]||require(e[r][1])[e[r][0]];h=s.apply(t,l),module.exports[i]=h||1}}else if("function"==typeof define&&define.amd)define(["exports"].concat(e.map(function(t){return t[1]})),function(r){if(n===r[i]){var o,u=a.slice.call(arguments,1),c=u.length;for(o=0;c>o;o++)l[o]=r[e[o][0]]||u[o];h=s.apply(t,l),r[i]=h||1}});else if(n===t[i]){for(r=0;u>r;r++)l[r]=t[e[r][0]];h=s.apply(t,l),t[i]=h||1}}(this,"MOD3",[["Classy","./classy"]],function(t){var i=i||{VERSION:"0.4",Class:t.Class,StaticClass:t.Static};return!function(t){"use strict";t.Constants={PI:Math.PI,invPI:1/Math.PI,halfPI:.5*Math.PI,doublePI:2*Math.PI,toRad:Math.PI/180,toDeg:180/Math.PI},t.ModConstant={NONE:0,LEFT:-1,RIGHT:1,X:1,Y:2,Z:4,Xi:0,Yi:1,Zi:2},t.Array32F="undefined"!=typeof Float32Array?Float32Array:Array,t.Array64F="undefined"!=typeof Float64Array?Float64Array:Array,t.Array8I="undefined"!=typeof Int8Array?Int8Array:Array,t.Array16I="undefined"!=typeof Int16Array?Int16Array:Array,t.Array32I="undefined"!=typeof Int32Array?Int32Array:Array,t.Array8U="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Array16U="undefined"!=typeof Uint16Array?Uint16Array:Array,t.Array32U="undefined"!=typeof Uint32Array?Uint32Array:Array,t.VecArray=t.Array32F}(i),!function(t,i){"use strict";var e,s=t.Constants.toRad,n=t.Constants.toDeg,r=Math.min,h=Math.max,o=Math.pow,a=Math.round,u=Math.floor,l=Math.ceil,c=t.XMath=t.StaticClass({normalize:function(t,i,s){var n,r=i-t;return n=0===r?1:e(0,1,(s-t)/i)},toRange:function(t,i,e){var s,n=i-t;return s=0===n?0:t+(i-t)*e},inRange:function(t,e,s,n){return n===i&&(n=!1),n?s>=t&&e>=s:s>t&&e>s},sign:function(t,e){return e===i&&(e=0),0==t?e:t>0?1:-1},trim:function(t,i,e){return r(i,h(t,e))},wrap:function(t,i,e){var s=i-t;return t>e?e+s:e>=i?e-s:e},degToRad:function(t){return t*s},radToDeg:function(t){return t*n},presicion:function(t,i){var e=o(10,i);return a(t*e)/e},uceil:function(t){return 0>t?u(t):l(t)}});e=c.clamp=c.trim}(i),!function(t,i){"use strict";var e=t.XMath.normalize,s=t.XMath.toRange,n=t.XMath.trim;t.Range=t.Class({constructor:function(t,e){this.start=0,this.end=1,t!==i&&(this.start=t),e!==i&&(this.end=e)},name:"Range",start:0,end:1,dispose:function(){return this.start=null,this.end=null,this},serialize:function(){return{name:this.name,start:this.start,end:this.end}},unserialize:function(t){return t&&this.name===t.name&&(this.start=t.start,this.end=t.end),this},getSize:function(){return this.end-this.start},move:function(t){this.start+=t,this.end+=t},isIn:function(t){return t>=this.start&&t<=this.end},normalize:function(t){return e(this.start,this.end,t)},toRange:function(t){return s(this.start,this.end,t)},trim:function(t){return n(this.start,this.end,t)},interpolate:function(t,i){return s(this.start,this.end,i.normalize(t))},toString:function(){return"["+this.start+" - "+this.end+"]"}})}(i),!function(t,i){"use strict";var e=Math.sin,s=Math.abs;t.Phase=t.Class({constructor:function(t){this.value=0,t!==i&&(this.value=t)},name:"Phase",value:0,dispose:function(){return this.value=null,this},serialize:function(){return{name:this.name,value:this.value}},unserialize:function(t){return t&&this.name===t.name&&(this.value=t.value),this},getPhasedValue:function(){return e(this.value)},getAbsPhasedValue:function(){return s(e(this.value))},getNormValue:function(){return.5*(e(this.value)+1)}})}(i),!function(t,i){"use strict";var e=t.Point=t.Class({constructor:function(t,e){this.x=t===i?0:t,this.y=e===i?0:e},name:"Point",x:0,y:0,dispose:function(){return this.x=null,this.y=null,this},serialize:function(){return{name:this.name,x:this.x,y:this.y}},unserialize:function(t){return t&&this.name===t.name&&(this.x=t.x,this.y=t.y),this},clone:function(){return new e(this.x,this.y)}})}(i),!function(t,i){"use strict";var e=Math.sin,s=Math.cos,n=t.Point,r=t.Matrix=t.Class({constructor:function(t,e,s,n){this.m11=t===i?1:t,this.m12=e===i?0:e,this.m21=s===i?0:s,this.m22=n===i?1:n},name:"Matrix",m11:1,m12:0,m21:0,m22:1,dispose:function(){return this.m11=null,this.m12=null,this.m21=null,this.m22=null,this},serialize:function(){return{name:this.name,m11:this.m11,m12:this.m12,m21:this.m21,m22:this.m22}},unserialize:function(t){return t&&this.name===t.name&&(this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22),this},reset:function(){return this.m11=1,this.m12=0,this.m21=0,this.m22=1,this},rotate:function(t){var i=s(t),n=e(t);return this.m11=i,this.m12=-n,this.m21=n,this.m22=i,this},scale:function(t,e){return this.m12=0,this.m21=0,this.m11=1,this.m22=1,t!==i&&(this.m11=t,this.m22=t),e!==i&&(this.m22=e),this},multiply:function(t){var i=this.m11,e=this.m12,s=this.m21,n=this.m22,r=t.m11,h=t.m12,o=t.m21,a=t.m22;return this.m11=i*r+e*o,this.m12=i*h+e*a,this.m21=s*r+n*o,this.m22=s*h+n*a,this},transformPoint:function(t){var i=t.x,e=t.y,s=this.m11*i+this.m12*e,r=this.m21*i+this.m22*e;return new n(s,r)},transformPointSelf:function(t){var i=t.x,e=t.y;return t.x=this.m11*i+this.m12*e,t.y=this.m21*i+this.m22*e,t},clone:function(){return new r(this.m11,this.m12,this.m21,this.m22)}})}(i),!function(t,i){"use strict";var e=Math.sqrt,s=t.VecArray,n=t.Vector3=t.Class({__static__:{ZERO:function(){return new n([0,0,0])},dot:function(t,i){var e=t.xyz,s=i.xyz;return e[0]*s[0]+e[1]*s[1]+e[2]*s[2]},equals:function(t,i){var e=t.xyz,s=i.xyz;return e[0]==s[0]&&e[1]==s[1]&&e[2]==s[2]},cross:function(t,i){var e=t.xyz,s=i.xyz,r=e[0],h=e[1],o=e[2],a=s[0],u=s[1],l=s[2];return new n([h*l-o*u,o*a-r*l,r*u-h*a])},distance:function(t,i){var s=t.xyz,n=i.xyz,r=s[0]-n[0],h=s[1]-n[1],o=s[2]-n[2];return e(r*r+h*h+o*o)},sum:function(t,i){var e=t.xyz,s=i.xyz;return new n([e[0]+s[0],e[1]+s[1],e[2]+s[2]])}},constructor:function(t,e,n){t&&t.length?this.xyz=new s([t[0],t[1],t[2]]):(t=t===i?0:t,e=e===i?0:e,n=n===i?0:n,this.xyz=new s([t,e,n]))},name:"Vector3",xyz:null,dispose:function(){return this.xyz=null,this},serialize:function(){return{name:this.name,xyz:this.xyz}},unserialize:function(t){return t&&this.name===t.name&&(this.xyz=t.xyz),this},getXYZ:function(){return new s(this.xyz)},getXYZRef:function(){return this.xyz},setXYZ:function(t){return this.xyz=new s(t),this},setXYZRef:function(t){return this.xyz=t,this},clone:function(){return new n(this.xyz)},equalsSelf:function(t){var i=this.xyz,e=t.xyz;return i[0]==e[0]&&i[1]==e[1]&&i[2]==e[2]},zeroSelf:function(){return this.xyz[0]=0,this.xyz[1]=0,this.xyz[2]=0,this},negate:function(){var t=this.xyz;return new n([-t[0],-t[1],-t[2]])},negateSelf:function(){var t=this.xyz;return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],this},add:function(t){var i=this.xyz,e=t.xyz;return new n([i[0]+e[0],i[1]+e[1],i[2]+e[2]])},addSelf:function(t){var i=this.xyz,e=t.xyz;return i[0]+=e[0],i[1]+=e[1],i[2]+=e[2],this},subtract:function(t){var i=this.xyz,e=t.xyz;return new n([i[0]-e[0],i[1]-e[1],i[2]-e[2]])},subtractSelf:function(t){var i=this.xyz,e=t.xyz;return i[0]-=e[0],i[1]-=e[1],i[2]-=e[2],this},multiplyScalar:function(t){var i=this.xyz;return new n([i[0]*t,i[1]*t,i[2]*t])},multiplyScalarSelf:function(t){var i=this.xyz;return i[0]*=t,i[1]*=t,i[2]*=t,this},multiply:function(t){var i=this.xyz,e=t.xyz;return new n([i[0]*e[0],i[1]*e[1],i[2]*e[2]])},multiplySelf:function(t){var i=this.xyz,e=t.xyz;return i[0]*=e[0],i[1]*=e[1],i[2]*=e[2],this},divide:function(t){var i=1/t,e=this.xyz;return new n([e[0]*i,e[1]*i,e[2]*i])},divideSelf:function(t){var i=1/t,e=this.xyz;return e[0]*=i,e[1]*=i,e[2]*=i,this},normalize:function(){var t,i=this.xyz,s=i[0],r=i[1],h=i[2],o=s*s+r*r+h*h;return o>0&&(t=1/e(o),s*=t,r*=t,h*=t),new n([s,r,h])},normalizeSelf:function(){var t,i=this.xyz,s=i[0],n=i[1],r=i[2],h=s*s+n*n+r*r;return h>0&&(t=1/e(h),s*=t,n*=t,r*=t),i[0]=s,i[1]=n,i[2]=r,this},getMagnitude:function(){var t=this.xyz,i=t[0],s=t[1],n=t[2];return e(i*i+s*s+n*n)},setMagnitude:function(t){this.normalizeSelf();var i=this.xyz;return i[0]*=t,i[1]*=t,i[2]*=t,this},dotSelf:function(t){var i=this.xyz,e=t.xyz;return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]},crossSelf:function(t){var i=this.xyz,e=t.xyz,s=i[0],n=i[1],r=i[2],h=e[0],o=e[1],a=e[2];return i[0]=n*a-r*o,i[1]=r*h-s*a,i[2]=s*o-n*h,this},distanceSelf:function(t){var i=this.xyz,s=t.xyz,n=i[0]-s[0],r=i[1]-s[1],h=i[2]-s[2];return e(n*n+r*r+h*h)},toString:function(){return"["+this.xyz[0]+" , "+this.xyz[1]+" , "+this.xyz[2]+"]"}})}(i),!function(t,i){"use strict";var e=Math.sin,s=Math.cos,n=t.Matrix4=t.Class({__static__:{multiplyVector:function(t,i){var e=i.xyz,s=e[0],n=e[1],r=e[2];return e[0]=s*t.n11+n*t.n12+r*t.n13+t.n14,e[1]=s*t.n21+n*t.n22+r*t.n23+t.n24,e[2]=s*t.n31+n*t.n32+r*t.n33+t.n34,i},calculateMultiply:function(t,i){var e=t.n11,s=i.n11,n=t.n21,r=i.n21,h=t.n31,o=i.n31,a=t.n12,u=i.n12,l=t.n22,c=i.n22,f=t.n32,d=i.n32,m=t.n13,p=i.n13,x=t.n23,v=i.n23,y=t.n33,g=i.n33,w=t.n14,z=i.n14,M=t.n24,V=i.n24,b=t.n34,X=i.n34;return t.n11=e*s+a*r+m*o,t.n12=e*u+a*c+m*d,t.n13=e*p+a*v+m*g,t.n14=e*z+a*V+m*X+w,t.n21=n*s+l*r+x*o,t.n22=n*u+l*c+x*d,t.n23=n*p+l*v+x*g,t.n24=n*z+l*V+x*X+M,t.n31=h*s+f*r+y*o,t.n32=h*u+f*c+y*d,t.n33=h*p+f*v+y*g,t.n34=h*z+f*V+y*X+b,t}},constructor:function(t,e,s,n,r,h,o,a,u,l,c,f,d,m,p,x){this.n11=t===i?1:t,this.n12=e===i?0:e,this.n13=s===i?0:s,this.n14=n===i?0:n,this.n21=r===i?0:r,this.n22=h===i?1:h,this.n23=o===i?0:o,this.n24=a===i?0:a,this.n31=u===i?0:u,this.n32=l===i?0:l,this.n33=c===i?1:c,this.n34=f===i?0:f,this.n41=d===i?0:d,this.n42=m===i?0:m,this.n43=p===i?0:p,this.n44=x===i?1:x},name:"Matrix4",n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1,dispose:function(){return this.n11=null,this.n12=null,this.n13=null,this.n14=null,this.n21=null,this.n22=null,this.n23=null,this.n24=null,this.n31=null,this.n32=null,this.n33=null,this.n34=null,this.n41=null,this.n42=null,this.n43=null,this.n44=null,this},serialize:function(){return{name:this.name,n11:this.n11,n12:this.n12,n13:this.n13,n14:this.n14,n21:this.n21,n22:this.n22,n23:this.n23,n24:this.n24,n31:this.n31,n32:this.n32,n33:this.n33,n34:this.n34,n41:this.n41,n42:this.n42,n43:this.n43,n44:this.n44}},unserialize:function(t){return t&&this.name===t.name&&(this.n11=t.n11,this.n12=t.n12,this.n13=t.n13,this.n14=t.n14,this.n21=t.n21,this.n22=t.n22,this.n23=t.n23,this.n24=t.n24,this.n31=t.n31,this.n32=t.n32,this.n33=t.n33,this.n34=t.n34,this.n41=t.n41,this.n42=t.n42,this.n43=t.n43,this.n44=t.n44),this},reset:function(){return this.n11=1,this.n12=0,this.n13=0,this.n14=0,this.n21=0,this.n22=1,this.n23=0,this.n24=0,this.n31=0,this.n32=0,this.n33=1,this.n34=0,this.n41=0,this.n42=0,this.n43=0,this.n44=1,this},translationMatrix:function(t,i,e){return this.n14=t,this.n24=i,this.n34=e,this},translationMatrixFromVector:function(t){var i=t.xyz;return this.n14=i[0],this.n24=i[1],this.n34=i[2],this},scaleMatrix:function(t,i,e){return this.n11=t,this.n22=i,this.n33=e,this},scaleMatrixFromVector:function(t){var i=t.xyz;return this.n11=i[0],this.n22=i[0],this.n33=i[0],this},rotationMatrix:function(t,i,n,r){var h=s(r),o=e(r),a=1-h,u=t*i*a,l=i*n*a,c=t*n*a,f=o*n,d=o*i,m=o*t;return this.n11=h+t*t*a,this.n12=-f+u,this.n13=d+c,this.n14=0,this.n21=f+u,this.n22=h+i*i*a,this.n23=-m+l,this.n24=0,this.n31=-d+c,this.n32=m+l,this.n33=h+n*n*a,this.n34=0,this},rotationMatrixFromVector:function(t,i){var n=t.xyz,r=n[0],h=n[1],o=n[2],a=s(i),u=e(i),l=1-a,c=r*h*l,f=h*o*l,d=r*o*l,m=u*o,p=u*h,x=u*r;return this.n11=a+r*r*l,this.n12=-m+c,this.n13=p+d,this.n14=0,this.n21=m+c,this.n22=a+h*h*l,this.n23=-x+f,this.n24=0,this.n31=-p+d,this.n32=x+f,this.n33=a+o*o*l,this.n34=0,this},multiply:function(t){return n.calculateMultiply(this,t),this},multiplyVector:function(t){var i=t.xyz,e=i[0],s=i[1],n=i[2];return i[0]=e*this.n11+s*this.n12+n*this.n13+this.n14,i[1]=e*this.n21+s*this.n22+n*this.n23+this.n24,i[2]=e*this.n31+s*this.n32+n*this.n33+this.n34,t}})}(i),!function(t,i){"use strict";var e=Object.prototype,s=Function.prototype,n=Array.prototype,r=s.call.bind(n.slice),h=s.call.bind(e.toString),o=i.isNode="undefined"!=typeof global&&"[object global]"===h(global),a=i.isBrowser=!o&&"undefined"!=typeof navigator,u=i.isWorker="function"==typeof importScripts&&navigator instanceof WorkerNavigator,l=i.supportsWorker="function"==typeof Worker;if(i.getPath=function(){var t,i=null;return o?{path:__dirname,file:__filename}:(u?i=self.location.href:a&&(t=document.getElementsByTagName("script"))&&t.length&&(i=t[t.length-1].src),i?{path:i.split("/").slice(0,-1).join("/"),file:""+i}:{path:null,file:null})},u){var c=null;t.console={log:function(t){postMessage({event:"console.log",data:{output:t||""}})},error:function(t){postMessage({event:"console.error",data:{output:t||""}})}},onmessage=function(t){var e=t.data.event,s=t.data.data||null;switch(e){case"init":c&&(c.dispose(!0),c=null),s&&s.modifier&&(c=i.Factory.getModifier(s));break;case"import":s&&s["import"]&&s["import"].length&&importScripts(s["import"].join(","));break;case"apply":s&&c&&(s.modifiable&&c.setModifiable(i.Factory.getMesh(s.modifiable)),s.params&&c.unserialize(s.params),c.send("apply",{modifiable:c._apply().mod.serialize()}));break;case"dispose":default:c&&(c.dispose(!0),c=null),close()}}}i.WorkerInterface=i.Class({path:i.getPath(),name:null,_worker:null,_workerListeners:null,disposeWorker:function(){var t=this;return t._worker&&(t.send("dispose"),t._worker=null,t._workerListeners=null),t},scripts:function(){var t=r(arguments);return t.length&&this.send("import",{"import":t}),this},worker:function(t){var i,e=this;if(arguments.length||(t=!0),t=!!t,!1===t)return e._worker&&e.disposeWorker(),e;if(!e._worker){if(!l)throw new Error("Worker is not supported");e._workerListeners={},i=e._worker=new Worker(this.path.file),i.onmessage=function(t){if(t.data.event){var i=t.data.event,s=t.data.data||null;e._workerListeners&&e._workerListeners[i]&&e._workerListeners[i](s),("console.log"===i||"console.error"===i)&&log("Worker: "+s.output)}},i.onerror=function(t){if(!e._workerListeners||!e._workerListeners.error)throw new Error("Worker Error: "+t.message+" file: "+t.filename+" line: "+t.lineno);e._workerListeners.error(t)},e.send("init",{modifier:e.name})}return e},bind:function(t,i){return t&&i&&this._workerListeners&&(this._workerListeners[t]=i.bind(this)),this},unbind:function(t){return t&&this._workerListeners&&this._workerListeners[t]&&delete this._workerListeners[t],this},send:function(t,i){return t&&(u?postMessage({event:t,data:i||null}):this._worker&&this._worker.postMessage({event:t,data:i||null})),this}})}(this,i),!function(t,i){"use strict";var e=t.ModConstant,s=e.X,n=e.Y,r=e.Z,h=t.Vector3,o=t.VecArray;t.VertexProxy=t.Class({constructor:function(t){this.xyz=new o([0,0,0]),this.original=new o([0,0,0]),this.ratio=new o([0,0,0]),i!==t&&null!==t&&!1!==t&&this.setVertex(t)},name:"VertexProxy",vertex:null,xyz:null,original:null,ratio:null,dispose:function(){return this.vertex=null,this.xyz=null,this.original=null,this.ratio=null,this},serialize:function(){return{vertex:this.name,xyz:this.getXYZ(),original:this.original,ratio:this.ratio}},unserialize:function(t){return t&&(this.setXYZ(t.xyz),this.original=t.original,this.ratio=t.ratio),this},setVertex:function(t){return this.vertex=t,this},getRatioVector:function(){return new h(this.ratio)},getRatio:function(t){switch(t){case s:return this.ratio[0];case n:return this.ratio[1];case r:return this.ratio[2]}return-1},getOriginalValue:function(t){switch(t){case s:return this.original[0];case n:return this.original[1];case r:return this.original[2]}return 0},setRatios:function(t,e,s){return t=t===i?0:t,e=e===i?0:e,s=s===i?0:s,this.ratio=new o([t,e,s]),this},setOriginalPosition:function(t,e,s){return t=t===i?0:t,e=e===i?0:e,s=s===i?0:s,this.original=new o([t,e,s]),this},getXYZ:function(){return new o(this.xyz)},getXYZRef:function(){return this.xyz},getX:function(){return this.xyz[0]},getY:function(){return this.xyz[1]},getZ:function(){return this.xyz[2]},setXYZ:function(t){return this.xyz=new o(t),this},setXYZRef:function(t){return this.xyz=t,this},setX:function(t){return this.xyz[0]=t,this},setY:function(t){return this.xyz[1]=t,this},setZ:function(t){return this.xyz[2]=t,this},getValue:function(t){switch(t){case s:return this.getX();case n:return this.getY();case r:return this.getZ()}return 0},setValue:function(t,i){switch(t){case s:this.setX(i);break;case n:this.setY(i);break;case r:this.setZ(i)}return this},reset:function(){return this.setXYZ(this.original),this},collapse:function(){return this.original=this.getXYZ(),this},getVector:function(){return new h(this.getXYZ())},setVector:function(t){this.setXYZ(t.xyz)}})}(i),!function(t){"use strict";var i=t.FaceProxy=t.Class(Object,{constructor:function(){this.vertices=[]},name:"FaceProxy",vertices:null,dispose:function(){return this.vertices=null,this},serialize:function(){return{face:this.name,vertices:null}},unserialize:function(t){return t&&this.name===t.face&&(this.vertices=t.vertices||null),this},addVertex:function(t){this.vertices.push(t)},getVertices:function(){return this.vertices}});i.unserialize-function(e){return e&&e.face&&t[e.face]?(new t[e.face]).unserialize(e):new i}}(i),!function(t,i){"use strict";var e,s,n=t.ModConstant,r=n.X,h=n.Y,o=n.Z,a=Math.min,u=Math.max;e=function(t){return t?t.serialize():t},s=t.isWorker?function(i){return i&&i.vertex?(new t.VertexProxy).unserialize(i):i}:function(t,i){return t&&t.vertex?this.vertices[i].unserialize(t):t},t.MeshProxy=t.Class({constructor:function(t){this.maxX=null,this.maxY=null,this.maxZ=null,this.minX=null,this.minY=null,this.minZ=null,this.maxAxis=null,this.midAxis=null,this.minAxis=null,this.width=null,this.height=null,this.depth=null,this.vertices=[],this.faces=[],this.mesh=null,i!==t&&this.setMesh(t)},name:"MeshProxy",maxX:null,maxY:null,maxZ:null,minX:null,minY:null,minZ:null,maxAxis:null,midAxis:null,minAxis:null,width:null,height:null,depth:null,vertices:null,faces:null,mesh:null,dispose:function(){return this.maxX=null,this.maxY=null,this.maxZ=null,this.minX=null,this.minY=null,this.minZ=null,this.maxAxis=null,this.midAxis=null,this.minAxis=null,this.width=null,this.height=null,this.depth=null,this.disposeFaces(),this.disposeVertices(),this.mesh=null,this},disposeVertices:function(){var t,i;if(this.vertices)for(i=this.vertices.length,t=0;i>t;t++)this.vertices[t].dispose();return this.vertices=null,this},disposeFaces:function(){var t,i;if(this.faces)for(i=this.faces.length,t=0;i>t;t++)this.faces[t].dispose();return this.faces=null,this},serialize:function(){return{mesh:this.name,maxX:this.maxX,maxY:this.maxY,maxZ:this.maxZ,minX:this.minX,minY:this.minY,minZ:this.minZ,maxAxis:this.maxAxis,midAxis:this.midAxis,minAxis:this.minAxis,width:this.width,height:this.height,depth:this.depth,vertices:this.vertices?this.vertices.map(e):null,faces:null}},unserialize:function(i){return i&&(t.isWorker&&(this.disposeFaces(),this.disposeVertices()),this.maxX=i.maxX,this.maxY=i.maxY,this.maxZ=i.maxZ,this.minX=i.minX,this.minY=i.minY,this.minZ=i.minZ,this.maxAxis=i.maxAxis,this.midAxis=i.midAxis,this.minAxis=i.minAxis,this.width=i.width,this.height=i.height,this.depth=i.depth,this.vertices=(i.vertices||[]).map(s,this),this.faces=null),this},setMesh:function(t){return this.mesh=t,this.vertices=[],this},getVertices:function(){return this.vertices},getFaces:function(){return this.faces},analyzeGeometry:function(){var t,i,e,s,n,l,c,f,d,m,p,x,v,y,g=this.vertices,w=g.length,z=w;for(w&&(t=g[0],i=t.getXYZ(),e=i[0],s=i[1],n=i[2],l=c=e,f=d=s,m=p=n);--z>=0;)t=g[z],i=t.getXYZ(),e=i[0],s=i[1],n=i[2],t.setOriginalPosition(e,s,n),l=a(l,e),f=a(f,s),m=a(m,n),c=u(c,e),d=u(d,s),p=u(p,n);x=c-l,v=d-f,y=p-m,this.width=x,this.height=v,this.depth=y,this.minX=l,this.maxX=c,this.minY=f,this.maxY=d,this.minZ=m,this.maxZ=p;var M=u(x,v,y),V=a(x,v,y);for(M==x&&V==v?(this.minAxis=h,this.midAxis=o,this.maxAxis=r):M==x&&V==y?(this.minAxis=o,this.midAxis=h,this.maxAxis=r):M==v&&V==x?(this.minAxis=r,this.midAxis=o,this.maxAxis=h):M==v&&V==y?(this.minAxis=o,this.midAxis=r,this.maxAxis=h):M==y&&V==x?(this.minAxis=r,this.midAxis=h,this.maxAxis=o):M==y&&V==v&&(this.minAxis=h,this.midAxis=r,this.maxAxis=o),z=w;--z>=0;)t=g[z],i=t.getXYZ(),t.setRatios((i[0]-l)/x,(i[1]-f)/v,(i[2]-m)/y);return this},resetGeometry:function(){for(var t=this.vertices,i=t.length;--i>=0;)t[i].reset();return this.update(),this},collapseGeometry:function(){for(var t=this.vertices,i=t.length;--i>=0;)t[i].collapse();return this.update(),this.analyzeGeometry(),this},getMin:function(t){switch(t){case r:return this.minX;case h:return this.minY;case o:return this.minZ}return-1},getMax:function(t){switch(t){case r:return this.maxX;case h:return this.maxY;case o:return this.maxZ}return-1},getSize:function(t){switch(t){case r:return this.width;case h:return this.height;case o:return this.depth}return-1},update:function(){return this},postApply:function(){return this},updateMeshPosition:function(){return this}})}(i),!function(t){"use strict";var i=0,e=t.ModConstant.NONE;t.Modifier=t.Class(t.WorkerInterface,{constructor:function(t){this.id=++i,this.name="Modifier",this.mod=t||null,this.axes=e,this.constraint=e,this.enabled=!0},id:null,name:"Modifier",mod:null,axes:null,constraint:null,enabled:!0,dispose:function(t){return this.disposeWorker(),!0===t&&this.mod&&this.mod.dispose(),this.mod=null,this.name=null,this.axes=null,this.constraint=null,this},serialize:function(){return{modifier:this.name,params:{axes:this.axes,constraint:this.constraint,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.axes=i.axes,this.constraint=i.constraint,this.enabled=i.enabled}return this},enable:function(t){return arguments.length?(this.enabled=!!t,this):this.enabled},constraintAxes:function(t){return this.axes=t||e,this},setConstraint:function(t){return this.constraint=t||e,this},setModifiable:function(t){return this.mod=t,this},getVertices:function(){return this.mod?this.mod.getVertices():null},_apply:function(){return this},apply:function(t){var i=this;return i._worker?i.bind("apply",function(e){i.unbind("apply"),e&&e.modifiable&&(i.mod.unserialize(e.modifiable),i.mod.update()),t&&t.call(i)}).send("apply",{params:i.serialize(),modifiable:i.mod.serialize()}):(i._apply(),t&&t.call(i)),i},toString:function(){return"[Modifier "+this.name+"]"}})}(i),!function(t){"use strict";t.Library3d=t.Class({constructor:function(){this.id="Library3d",this.meshClass=t.MeshProxy,this.vertexClass=t.VertexProxy},id:"Library3d",meshClass:null,vertexClass:null}),t.Factory=t.StaticClass({getMeshProxy:function(t){if(arguments.length){var i=t.meshClass;return i?new i:null}return null},getModifier:function(i){return i&&i.modifier&&t[i.modifier]?new t[i.modifier]:null},getLibrary:function(i){return i&&i.library&&t[i.library]?new t[i.library]:new t.Library3d},getMesh:function(i){return i&&i.mesh&&t[i.mesh]?(new t.MeshProxy).unserialize(i):new t.MeshProxy},getVertex:function(i){return i&&i.vertex&&t[i.vertex]?(new t.VertexProxy).unserialize(i):new t.VertexProxy}})}(i),!function(t){"use strict";var i=t.Factory.getMeshProxy,e=function(t){return t?t.serialize():t},s=t.ModifierStack=t.Class(t.WorkerInterface,{constructor:function(e,s){this.mod=null,this.stack=[],t.isWorker?(this.lib3d=new t.Library3d,this.mod=i(this.lib3d)):(this.lib3d=e,this.mod=i(this.lib3d)),s&&(this.mod.setMesh(s),this.mod.analyzeGeometry())},name:"ModifierStack",lib3d:null,mod:null,stack:null,dispose:function(t){if(this.lib3d=null,t&&this.stack)for(;this.stack.length;)this.stack.pop().dispose();return this.stack=null,this.mod&&this.mod.dispose(),this.mod=null,this},serialize:function(){return{modifier:this.name,params:{modifiers:this.stack.map(e)}}},unserialize:function(i){if(i&&this.name===i.modifier){var e,s=i.params.modifiers,n=this.stack;if(s.length!==n.length)for(n.length=0,e=0;e<s.length;e++)n.push(t.Factory.getModifier(s[e]));for(e=0;e<n.length;e++)n[e]=n[e].unserialize(s[e]).setModifiable(this.mod);this.stack=n}return this},setModifiable:function(t){return this.mod=t,this},add:function(t){return t&&(t.setModifiable(this.mod),this.stack.push(t)),this},_apply:function(){if(this.mod&&this.stack&&this.stack.length){var t=this.stack,i=t.length,e=this.mod,s=0;for(e.resetGeometry();i>s;)t[s].enabled&&t[s]._apply(),s++;e.update()}return this},apply:function(t){var i=this;return i._worker?i.bind("apply",function(e){i.unbind("apply"),e&&e.modifiable&&(i.mod.unserialize(e.modifiable),i.mod.update()),t&&t.call(i)}).send("apply",{params:i.serialize(),modifiable:i.mod.serialize()}):(i._apply(),t&&t.call(i)),i},collapse:function(){return this.mod&&this.stack&&this.stack.length&&(this.apply(),this.mod.collapseGeometry(),this.stack.length=0),this},clear:function(){return this.stack&&(this.stack.length=0),this},getMeshInfo:function(){return this.mod}});s.prototype.addModifier=s.prototype.add}(i),function(t){function i(t,i,e){this.x=t,this.y=i,this.z=e}function e(t){return t*t*t*(t*(6*t-15)+10)}function s(t,i,e){return(1-e)*t+e*i}var n=t.noise={};i.prototype.dot2=function(t,i){return this.x*t+this.y*i},i.prototype.dot3=function(t,i,e){return this.x*t+this.y*i+this.z*e};var r=[new i(1,1,0),new i(-1,1,0),new i(1,-1,0),new i(-1,-1,0),new i(1,0,1),new i(-1,0,1),new i(1,0,-1),new i(-1,0,-1),new i(0,1,1),new i(0,-1,1),new i(0,1,-1),new i(0,-1,-1)],h=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],o=new Array(512),a=new Array(512);n.seed=function(t){t>0&&1>t&&(t*=65536),t=Math.floor(t),256>t&&(t|=t<<8);for(var i=0;256>i;i++){var e;e=1&i?h[i]^255&t:h[i]^255&t>>8,o[i]=o[i+256]=e,a[i]=a[i+256]=r[e%12]}},n.seed(0);var u=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,c=1/3,f=1/6;n.simplex2=function(t,i){var e,s,n,r,h,c=(t+i)*u,f=Math.floor(t+c),d=Math.floor(i+c),m=(f+d)*l,p=t-f+m,x=i-d+m;p>x?(r=1,h=0):(r=0,h=1);var v=p-r+l,y=x-h+l,g=p-1+2*l,w=x-1+2*l;f&=255,d&=255;var z=a[f+o[d]],M=a[f+r+o[d+h]],V=a[f+1+o[d+1]],b=.5-p*p-x*x;0>b?e=0:(b*=b,e=b*b*z.dot2(p,x));var X=.5-v*v-y*y;0>X?s=0:(X*=X,s=X*X*M.dot2(v,y));var A=.5-g*g-w*w;return 0>A?n=0:(A*=A,n=A*A*V.dot2(g,w)),70*(e+s+n)},n.simplex3=function(t,i,e){var s,n,r,h,u,l,d,m,p,x,v=(t+i+e)*c,y=Math.floor(t+v),g=Math.floor(i+v),w=Math.floor(e+v),z=(y+g+w)*f,M=t-y+z,V=i-g+z,b=e-w+z;M>=V?V>=b?(u=1,l=0,d=0,m=1,p=1,x=0):M>=b?(u=1,l=0,d=0,m=1,p=0,x=1):(u=0,l=0,d=1,m=1,p=0,x=1):b>V?(u=0,l=0,d=1,m=0,p=1,x=1):b>M?(u=0,l=1,d=0,m=0,p=1,x=1):(u=0,l=1,d=0,m=1,p=1,x=0);var X=M-u+f,A=V-l+f,P=b-d+f,Y=M-m+2*f,Z=V-p+2*f,C=b-x+2*f,k=M-1+3*f,I=V-1+3*f,R=b-1+3*f;y&=255,g&=255,w&=255;var S=a[y+o[g+o[w]]],_=a[y+u+o[g+l+o[w+d]]],T=a[y+m+o[g+p+o[w+x]]],O=a[y+1+o[g+1+o[w+1]]],E=.5-M*M-V*V-b*b;0>E?s=0:(E*=E,s=E*E*S.dot3(M,V,b));var N=.5-X*X-A*A-P*P;0>N?n=0:(N*=N,n=N*N*_.dot3(X,A,P));var $=.5-Y*Y-Z*Z-C*C;0>$?r=0:($*=$,r=$*$*T.dot3(Y,Z,C));var F=.5-k*k-I*I-R*R;return 0>F?h=0:(F*=F,h=F*F*O.dot3(k,I,R)),32*(s+n+r+h)},n.perlin2=function(t,i){var n=Math.floor(t),r=Math.floor(i);t-=n,i-=r,n=255&n,r=255&r;var h=a[n+o[r]].dot2(t,i),u=a[n+o[r+1]].dot2(t,i-1),l=a[n+1+o[r]].dot2(t-1,i),c=a[n+1+o[r+1]].dot2(t-1,i-1),f=e(t);return s(s(h,l,f),s(u,c,f),e(i))},n.perlin3=function(t,i,n){var r=Math.floor(t),h=Math.floor(i),u=Math.floor(n);t-=r,i-=h,n-=u,r=255&r,h=255&h,u=255&u;var l=a[r+o[h+o[u]]].dot3(t,i,n),c=a[r+o[h+o[u+1]]].dot3(t,i,n-1),f=a[r+o[h+1+o[u]]].dot3(t,i-1,n),d=a[r+o[h+1+o[u+1]]].dot3(t,i-1,n-1),m=a[r+1+o[h+o[u]]].dot3(t-1,i,n),p=a[r+1+o[h+o[u+1]]].dot3(t-1,i,n-1),x=a[r+1+o[h+1+o[u]]].dot3(t-1,i-1,n),v=a[r+1+o[h+1+o[u+1]]].dot3(t-1,i-1,n-1),y=e(t),g=e(i),w=e(n);return s(s(s(l,m,y),s(c,p,y),w),s(s(f,x,y),s(d,v,y),w),g)}}(this),!function(t){"use strict";var i=t.Vector3;t.Pivot=t.Class(t.Modifier,{constructor:function(t,e,s){this.$super("constructor"),this.name="Pivot",this.pivot=new i([t||0,e||0,s||0])},pivot:null,dispose:function(){return this.pivot.dispose(),this.pivot=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{pivot:this.pivot.serialize(),enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.pivot.unserialize(i.pivot),this.enabled=!!i.enabled}return this},setMeshCenter:function(){var t=this.mod;return this.pivot=new i(-(t.minX+.5*t.width),-(t.minY+.5*t.height),-(t.minZ+.5*t.depth)),this},_apply:function(){for(var t,i=this.mod.vertices,e=i.length,s=this.pivot;--e>=0;)t=i[e],t.setVector(t.getVector().addSelf(s));return this.mod.updateMeshPosition(s.negate()),this}})}(i),!function(t,i){"use strict";var e=t.ModConstant.NONE,s=t.ModConstant.LEFT,n=t.ModConstant.RIGHT,r=t.Matrix,h=Math.atan,o=(Math.atan2,Math.sin),a=Math.cos,u=t.Constants.PI,l=t.Constants.halfPI,c=t.Constants.doublePI,f=t.Point;t.Bend=t.Class(t.Modifier,{constructor:function(t,s,n){this.$super("constructor"),this.name="Bend",this.constraint=e,this.max=0,this.min=0,this.mid=0,this.width=0,this.height=0,this.origin=0,this.m1=null,this.m2=null,this.diagAngle=0,this.switchAxes=!1,this.force=t!==i?t:0,this.offset=s!==i?s:0,n!==i?this.setAngle(n):this.setAngle(0)},force:0,offset:0,angle:0,diagAngle:0,max:0,min:0,mid:0,width:0,height:0,origin:0,m1:null,m2:null,switchAxes:!1,dispose:function(){return this.force=null,this.offset=null,this.angle=null,this.diagAngle=null,this.max=null,this.min=null,this.mid=null,this.width=null,this.height=null,this.origin=null,this.m1&&this.m1.dispose(),this.m2&&this.m2.dispose(),this.m1=null,this.m2=null,this.switchAxes=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{force:this.force,offset:this.offset,angle:this.angle,diagAngle:this.diagAngle,max:this.max,min:this.min,mid:this.mid,width:this.width,height:this.height,origin:this.origin,m1:this.m1.serialize(),m2:this.m2.serialize(),switchAxes:this.switchAxes,constraint:this.constraint,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.force=i.force,this.offset=i.offset,this.angle=i.angle,this.diagAngle=i.diagAngle,this.max=i.max,this.min=i.min,this.mid=i.mid,this.width=i.width,this.height=i.height,this.origin=i.origin,this.m1.unserialize(i.m1),this.m2.unserialize(i.m2),this.switchAxes=i.switchAxes,this.constraint=i.constraint,this.enabled=!!i.enabled}return this},setAngle:function(t){return this.angle=t,this.m1=(new r).rotate(t),this.m2=(new r).rotate(-t),this},setModifiable:function(t){return this.$super("setModifiable",t),this.max=this.switchAxes?this.mod.midAxis:this.mod.maxAxis,this.min=this.mod.minAxis,this.mid=this.switchAxes?this.mod.maxAxis:this.mod.midAxis,this.width=this.mod.getSize(this.max),this.height=this.mod.getSize(this.mid),this.origin=this.mod.getMin(this.max),this.diagAngle=h(this.width/this.height),this},_apply:function(){if(!this.force)return this;for(var t,i,e,r,h,d,m,p,x,v,y=this.mod.vertices,g=y.length,w=this.constraint,z=this.width,M=this.offset,V=this.origin,b=this.force,X=this.max,A=this.min,P=this.mid,Y=this.m1,Z=this.m2,C=V+z*M,k=z/u/b,I=c*(z/(k*c)),R=1/z;--g>=0;)t=y[g],i=t.getValue(X),e=t.getValue(P),r=t.getValue(A),h=Y.transformPointSelf(new f(i,e)),i=h.x,e=h.y,d=(i-V)*R,s===w&&M>=d||n===w&&d>=M||(m=l-I*M+I*d,p=o(m)*(k+r),x=a(m)*(k+r),r=p-k,i=C-x),v=Z.transformPointSelf(new f(i,e)),i=v.x,e=v.y,t.setValue(X,i),t.setValue(P,e),t.setValue(A,r);return this
}})}(i),!function(t){"use strict";var i=t.Vector3,e=Math.max,s=Math.exp;t.Bloat=t.Class(t.Modifier,{constructor:function(){this.$super("constructor"),this.name="Bloat",this.radius=0,this.a=.01,this.center=i.ZERO()},center:null,radius:0,a:.01,dispose:function(){return this.center.dispose(),this.center=null,this.radius=null,this.a=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{center:this.center.serialize(),radius:this.radius,a:this.a,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.center.unserialize(i.center),this.radius=i.radius,this.a=i.a,this.enabled=!!i.enabled}return this},setRadius:function(t){return this.radius=e(0,t),this},setA:function(t){return this.a=e(0,t),this},_apply:function(){for(var t,i,e,n=this.mod.vertices,r=n.length,h=this.center,o=this.radius,a=this.a;--r>=0;)t=n[r],e=t.getVector().subtractSelf(h),i=e.getMagnitude(),e.setMagnitude(i+o*s(-i*a)),t.setVector(e.addSelf(h));return this}})}(i),!function(t,i){"use strict";var e=t.Vector3,s=t.Matrix4;t.Twist=t.Class(t.Modifier,{constructor:function(t){this.$super("constructor"),this.name="Twist",this.vector=new e([0,1,0]).normalizeSelf(),this.angle=t!==i?t:0,this.center=e.ZERO(),this.mat1=new s,this.mat2=new s},vector:null,angle:0,center:null,mat1:null,mat2:null,dispose:function(){return this.vector.dispose(),this.vector=null,this.angle=null,this.center.dispose(),this.center=null,this.mat1.dispose(),this.mat2.dispose(),this.mat1=null,this.mat2=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{vector:this.vector.serialize(),angle:this.angle,center:this.center.serialize(),mat1:this.mat1.serialize(),mat2:this.mat2.serialize(),enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.vector.unserialize(i.vector),this.angle=i.angle,this.center.unserialize(i.center),this.mat1.unserialize(i.mat1),this.mat2.unserialize(i.mat2),this.enabled=!!i.enabled}return this},_apply:function(){for(var t,i,s,n=this.mod,r=n.vertices,h=r.length,o=this.vector,a=this.angle,u=this.center,l=new e([.5*n.maxX,.5*n.maxY,.5*n.maxZ]),c=1/l.getMagnitude(),f=c*a,d=-e.dot(o,u);--h>=0;)t=r[h],s=t.getVector(),i=e.dot(s,o)+d,t.setVector(this.twistPoint(s,o,i*f));return this},twistPoint:function(t,i,s){var n=this.mat1.reset().translationMatrixFromVector(t),r=this.mat2.reset().rotationMatrixFromVector(i,s);return r.multiply(n),new e([r.n14,r.n24,r.n34])}})}(i),!function(t,i){"use strict";var e=Math.abs,s=Math.pow,n=(t.XMath.sign,t.ModConstant),r=n.NONE,h=n.LEFT,o=n.RIGHT,a=n.X,u=n.Y,l=n.Z;t.Skew=t.Class(t.Modifier,{constructor:function(t){this.$super("constructor"),this.name="Skew",this.force=t!==i?t:0,this.offset=.5,this.constraint=r,this.power=1,this.falloff=1,this.inverseFalloff=!1,this.oneSide=!1,this.swapAxes=!1,this.skewAxis=0},force:0,skewAxis:0,offset:.5,power:1,falloff:1,inverseFalloff:!1,oneSide:!1,swapAxes:!1,dispose:function(){return this.force=null,this.skewAxis=null,this.offset=null,this.power=null,this.falloff=null,this.inverseFalloff=null,this.oneSide=null,this.swapAxes=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{force:this.force,skewAxis:this.skewAxis,offset:this.offset,power:this.power,falloff:this.falloff,inverseFalloff:this.inverseFalloff,oneSide:this.oneSide,swapAxes:this.swapAxes,constraint:this.constraint,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.force=i.force,this.skewAxis=i.skewAxis,this.offset=i.offset,this.power=i.power,this.falloff=i.falloff,this.inverseFalloff=i.inverseFalloff,this.oneSide=i.oneSide,this.swapAxes=i.swapAxes,this.constraint=i.constraint,this.enabled=!!i.enabled}return this},setModifiable:function(t){return this.$super("setModifiable",t),this.skewAxis=this.skewAxis||this.mod.maxAxis,this},_apply:function(){for(var t,i,n,r,a,u,l,c,f=this.mod.vertices,d=f.length,m=this.constraint,p=this.skewAxis,x=this.offset,v=this.oneSide,y=this.inverseFalloff,g=this.falloff,w=1-g,z=this.power,M=this.force,V=this.getDisplaceAxis();--d>=0;)t=f[d],l=t.getRatio(p),h===m&&x>=l||o===m&&l>x||(i=l-x,v&&(i=e(i)),n=t.getRatio(V),y&&(n=1-n),r=g+n*w,c=0>i?-1:1,a=s(e(i),z)*c,u=t.getValue(V)+M*a*r,t.setValue(V,u));return this},getDisplaceAxis:function(){var t=this.skewAxis,i=this.swapAxes;switch(t){case a:return i?l:u;case u:return i?l:a;case l:return i?u:a}}})}(i),!function(t,i){"use strict";var e=t.Vector3,s=t.Matrix4,n=Math.pow;t.Taper=t.Class(t.Modifier,{constructor:function(t,s){this.$super("constructor"),this.name="Taper",this.vector=new e([1,0,1]),this.vector2=new e([0,1,0]),this.force=t!==i?t:0,this.power=s!==i?s:1},force:0,power:1,vector:null,vector2:null,dispose:function(){return this.vector.dispose(),this.vector2.dispose(),this.vector=null,this.vector2=null,this.force=null,this.power=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{force:this.force,power:this.power,vector:this.vector.serialize(),vector2:this.vector2.serialize(),enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.force=i.force,this.power=i.power,this.vector.unserialize(i.vector),this.vector2.unserialize(i.vector2),this.enabled=!!i.enabled}return this},_apply:function(){var t,i,e,r,h,o,a=this.mod.vertices,u=a.length,l=this.vector,c=this.vector2,f=this.force,d=this.power;for(r=new s;--u>=0;)t=a[u],i=t.getRatioVector().multiply(c),e=1!==d?f*n(i.getMagnitude(),d):f*i.getMagnitude(),o=l.xyz,r.reset().scaleMatrix(1+e*o[0],1+e*o[1],1+e*o[2]),h=t.getVector(),t.setVector(r.multiplyVector(h));return this}})}(i),!function(t){"use strict";var i=t.Constants.invPI,e=t.Constants.doublePI,s=t.Vector3,n=t.Matrix4;t.Wheel=t.Class(t.Modifier,{constructor:function(){this.$super("constructor"),this.name="Wheel",this.speed=0,this.turn=0,this.roll=0,this.radius=0,this.steerVector=new s([0,1,0]),this.rollVector=new s([0,0,1])},speed:0,turn:0,roll:0,radius:0,steerVector:null,rollVector:null,dispose:function(){return this.speed=null,this.turn=null,this.roll=null,this.radius=null,this.steerVector.dispose(),this.rollVector.dispose(),this.steerVector=null,this.rollVector=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{speed:this.speed,turn:this.turn,roll:this.roll,radius:this.radius,steerVector:this.steerVector.serialize(),rollVector:this.rollVector.serialize(),enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.speed=i.speed,this.turn=i.turn,this.roll=i.roll,this.radius=i.radius,this.steerVector.unserialize(i.steerVector),this.rollVector.unserialize(i.rollVector),this.enabled=!!i.enabled}return this},setModifiable:function(t){return this.$super("setModifiable",t),this.radius=.5*this.mod.width,this},_apply:function(){var t,i,e=this.mod.vertices,s=e.length,r=this.steerVector,h=this.turn,o=this.rollVector,a=this.roll,u=null,l=null,c=null;for(this.roll+=this.speed,h?(l=(new n).rotationMatrixFromVector(r,h),c=l.multiplyVector(o.clone()),u=(new n).rotationMatrixFromVector(c,a)):u=(new n).rotationMatrixFrom(o,a);--s>=0;)t=e[s],i=t.getVector(),l&&l.multiplyVector(i),t.setVector(u.multiplyVector(i));return this},getStep:function(){return this.radius*this.speed*i},getPerimeter:function(){return this.radius*e}})}(i),!function(t,i){"use strict";var e=t.Vector3,s=t.Range,n=t.Matrix4;t.Break=t.Class(t.Modifier,{constructor:function(t,n){this.$super("constructor"),this.name="Break",this.bv=new e([0,1,0]),this.range=new s(0,1),this.offset=t!==i?t:0,this.angle=n!==i?n:0},bv:null,range:null,offset:0,angle:0,dispose:function(){return this.bv.dispose(),this.bv=null,this.range.dispose(),this.range=null,this.offset=null,this.angle=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{bv:this.bv.serialize(),range:this.range.serialize(),offset:this.offset,angle:this.angle,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.bv.unserialize(i.bv),this.range.unserialize(i.range),this.offset=i.offset,this.angle=i.angle,this.enabled=!!i.enabled}return this},_apply:function(){var t,i,s,r,h,o=this.mod,a=o.vertices,u=a.length,l=this.offset,c=this.range,f=this.angle,d=this.bv,m=d.xyz;for(t=new e([0,0,-(o.minZ+o.depth*l)]),i=t.negate(),h=(new n).rotationMatrix(m[0],m[1],m[2],f);--u>=0;)s=a[u],r=s.getVector().addSelf(t),r.xyz[2]>=0&&c.isIn(s.ratio[1])&&h.multiplyVector(r),s.setVector(r.addSelf(i));return this}})}(i),!function(t,i){"use strict";var e=t.ModConstant.NONE,s=t.ModConstant.X,n=t.ModConstant.Y,r=t.ModConstant.Z,h=(t.VecArray,Math.random);t.Noise=t.Class(t.Modifier,{constructor:function(t){this.$super("constructor"),this.name="Noise",this.axes=e,this.start=0,this.end=0,this.force=t!==i?t:0},force:0,start:0,end:1,dispose:function(){return this.force=null,this.start=null,this.end=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{force:this.force,start:this.start,end:this.end,axes:this.axes,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.force=i.force,this.start=i.start,this.end=i.end,this.axes=i.axes,this.enabled=!!i.enabled}return this},setFalloff:function(t,e){return this.start=t!==i?t:0,this.end=e!==i?e:1,this},_apply:function(){var t,i,e,o,a,u=this.mod,l=this.axes,c=this.start,f=this.end,d=u.vertices,m=d.length,p=this.force,x=.5*p,v=u.maxAxis;if(!l||!p)return this;for(;--m>=0;)t=d[m],i=h()*p-x,e=t.getRatio(v),f>c?c>e?e=0:e>f&&(e=1):c>f?(e=1-e,e>c?e=0:f>e&&(e=1)):e=1,o=i*e,a=t.getXYZ(),t.setXYZ([a[0]+(l&s?0:o),a[1]+(l&n?0:o),a[2]+(l&r?0:o)]);return this}})}(i),!function(t){"use strict";var i=t.ModConstant,e=(i.NONE,i.X),s=i.Y,n=i.Z;t.DisplaceMap=t.Class(t.Modifier,{constructor:function(t,i,r,h){this.$super("constructor"),this.name="DisplaceMap",arguments.length>=3?(this.setBitmap(t,i,r),this.force=h||1):this.force=t||1,this.offset=127,this.axes=e|s|n},width:null,height:null,bitmapData:null,force:1,offset:127,dispose:function(){return this.bitmapData=null,this.width=null,this.height=null,this.force=null,this.offset=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{width:this.width,height:this.height,bitmapData:this.bitmapData,force:this.force,offset:this.offset,axes:this.axes,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.width=i.width,this.height=i.height,this.bitmapData=i.bitmapData,this.force=i.force,this.offset=i.offset,this.axes=i.axes,this.enabled=!!i.enabled}return this},setBitmap:function(t,i,e){return this.bitmapData=t||null,this.width=i||0,this.height=e||0,this},_apply:function(){var t,i,r,h,o,a=this.mod.vertices,u=a.length,l=this.axes,c=this.width,f=this.height,d=this.bitmapData,m=this.force,p=this.offset;if(!l||!d)return this;for(;--u>=0;)t=a[u],o=t.getXYZ(),r=~~((c-1)*t.ratio[0]),h=~~((f-1)*t.ratio[2]),i=h*c+r<<2,l&e&&(o[0]+=((255&d[i]>>16)-p)*m),l&s&&(o[1]+=((255&d[i+1]>>8)-p)*m),l&n&&(o[2]+=((255&d[i+2])-p)*m),t.setXYZ(o);return this}})}(i),!function(t,i){"use strict";var e=(t.Vector3,Math.round),s=t.VecArray,n=t.ModConstant,r=(n.NONE,n.X),h=n.Y,o=n.Z,a=t.PerlinNoise=t.Class({constructor:function(t,s){this.width=i!==t?e(t):10,this.height=i!==s?e(s):10},width:10,height:10,data:null,dispose:function(){return this.data=null,this.width=this.height=null,this},uvIndex:function(t,i){var e=this.width,s=this.height,n=~~((e-1)*t),r=~~((s-1)*i);return n+r*e},generate:function(){var t,i,e,n=this.width,r=this.height,h=n*r,o=new s(h);for(t=0,i=0,e=0;h>e;e++,t++)t>=n&&(t=0,i++),o[e]=noise.simplex2(t/n,i/r);return this.data=o,this},move:function(t,i){var e,n,r,h,o,a,u=this.width,l=this.height,c=u*l,f=this.data,d=new s(c);for(0>t&&(t+=u),0>i&&(i+=l),t=~~t,i=~~i,e=0,n=0,o=0;c>o;o++,e++)e>=u&&(e=0,n++),r=(e+t)%u,h=(n+i)%l,a=r+h*u,d[o]=f[a];return this.data=d,this}});t.Perlin=t.Class(t.Modifier,{constructor:function(e,s,n){this.$super("constructor"),this.name="Perlin",this.source=i!==s||t.isWorker?s:new a(25,25).generate(),this.force=e||1,this.autoRun=i!==n?!!n:!0,this.axes=r|h|o},speedX:1,speedY:1,source:null,force:1,offset:0,autoRun:!0,dispose:function(){return this.source=null,this.speedX=null,this.speedY=null,this.force=null,this.offset=null,this.autoRun=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{speedX:this.speedX,speedY:this.speedY,axes:this.axes,source:this.source?{data:this.source.data,width:this.source.width,height:this.source.height}:null,force:this.force,offset:this.offset,autoRun:!!this.autoRun,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var i=t.params;this.speedX=i.speedX,this.speedY=i.speedY,this.axes=i.axes,this.force=i.force,this.offset=i.offset,this.autoRun=!!i.autoRun,this.enabled=!!i.enabled,!this.source&&this.autoRun&&i.source&&(this.source=new a(i.source.width,i.source.height),this.source.data=i.source.data)}return this},setSpeed:function(t,i){return this.speedX=t,this.speedY=i,this},_apply:function(){var t,i,e,s,n=this.mod.vertices,a=n.length,u=this.axes,l=this.force,c=this.offset,f=this.source;if(!u||!f)return this;for(this.autoRun&&f.move(this.speedX,this.speedY),t=f.data;--a>=0;)i=n[a],s=i.getXYZ(),e=f.uvIndex(i.ratio[0],i.ratio[2]),u&r&&(s[0]+=(t[e]-c)*l),u&h&&(s[1]+=(t[e]-c)*l),u&o&&(s[2]+=(t[e]-c)*l),i.setXYZ(s);return this}})}(i),!function(t){"use strict";var i=t.ModConstant,e=i.X,s=i.Y,n=i.Z,r=t.Vector3,h=t.VecArray,o=t.VertexThree=t.Class(t.VertexProxy,{constructor:function(t,i){this.mesh=t,this.$super("constructor",i),this.name="VertexThree"},mesh:null,dispose:function(){return this.mesh=null,this.$super("dispose"),this},setVertex:function(t){return this.vertex=t,this.original=new h([t.x,t.y,t.z]),this.xyz=new h(this.original),this},getXYZ:function(){var t=this.vertex;return new h([t.x,t.y,t.z])},getX:function(){return this.vertex.x},getY:function(){return this.vertex.y},getZ:function(){return this.vertex.z},setXYZ:function(t){var i=this.vertex;return this.mesh.geometry,i.x=t[0],i.y=t[1],i.z=t[2],this},setX:function(t){var i=this.vertex;return i.x=t,this},setY:function(t){var i=this.vertex;return i.y=t,this},setZ:function(t){var i=this.vertex;return i.z=t,this},reset:function(){var t=this.vertex,i=(this.mesh.geometry,this.original);return t.x=i[0],t.y=i[1],t.z=i[2],this},collapse:function(){var t=this.vertex;return this.original=new h([t.x,t.y,t.z]),this},getValue:function(t){var i=this.vertex;switch(t){case e:return i.x;case s:return i.y;case n:return i.z}return 0},setValue:function(t,i){var r=this.vertex,h=!1;switch(t){case e:r.x=i,h=!0;break;case s:r.y=i,h=!0;break;case n:r.z=i,h=!0}return this},setVector:function(t){var i=this.vertex,e=t.xyz;return this.mesh.geometry,i.x=e[0],i.y=e[1],i.z=e[2],this},getVector:function(){var t=this.vertex;return new r([t.x,t.y,t.z])}});o.prototype.getXYZRef=o.prototype.getXYZ,o.prototype.setXYZRef=o.prototype.setXYZ}(i),!function(t){"use strict";var i=t.VertexThree;t.FaceProxy,t.MeshThree=t.Class(t.MeshProxy,{constructor:function(t){this.$super("constructor",t),this.name="MeshThree"},setMesh:function(t){this.$super("setMesh",t);var e,s=0,t=this.mesh,n=this.vertices,r=t.geometry.vertices,h=r.length,o=t.geometry.faces;for(o.length,s=0;h>s;)e=new i(t,r[s]),n.push(e),s++;return this.faces=null,this},update:function(){var t=this.mesh.geometry;return t.verticesNeedUpdate=!0,t.normalsNeedUpdate=!0,t.buffersNeedUpdate=!0,t.dynamic=!0,this},updateMeshPosition:function(t){var i=this.mesh.position,e=t.xyz;return i.x+=e[0],i.y+=e[1],i.z+=e[2],this}})}(i),!function(t){"use strict";var i=t.Class(t.Library3d,{constructor:function(){this.id="Three.js",this.meshClass=t.MeshThree,this.vertexClass=t.VertexThree}});t.LibraryThree=new i}(i),!function(t){"use strict";var i=t.ModConstant,e=i.X,s=i.Y,n=i.Z,r=t.Vector3,h=t.VecArray,o=t.VertexJ3D=t.Class(t.VertexProxy,{constructor:function(t,i){this.geometry=t,this.VERTEX_POSITION=J3D.Mesh.VERTEX_POSITION,this.$super("constructor",i),this.name="VertexJ3D"},geometry:null,VERTEX_POSITION:null,dispose:function(){return this.VERTEX_POSITION=null,this.geometry=null,this.$super("dispose"),this},setVertex:function(t){var i=this.geometry,e=i.arraysByName[this.VERTEX_POSITION],s=e.data;return this.vertex=t,this.original=new h([s[t],s[t+1],s[t+2]]),this.xyz=new h(this.original),this},getXYZ:function(){var t=this.vertex,i=this.geometry,e=i.arraysByName[this.VERTEX_POSITION],s=e.data;return new h([s[t],s[t+1],s[t+2]])},getX:function(){var t=this.vertex,i=this.geometry,e=i.arraysByName[this.VERTEX_POSITION],s=e.data;return s[t]},getY:function(){var t=this.vertex,i=this.geometry,e=i.arraysByName[this.VERTEX_POSITION],s=e.data;return s[t+1]},getZ:function(){var t=this.vertex,i=this.geometry,e=i.arraysByName[this.VERTEX_POSITION],s=e.data;return s[t+2]},setXYZ:function(t){var i=this.vertex,e=this.geometry,s=e.arraysByName[this.VERTEX_POSITION],n=s.data;return n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],this},setX:function(t){var i=this.vertex,e=this.geometry,s=e.arraysByName[this.VERTEX_POSITION],n=s.data;return n[i]=t,this},setY:function(t){var i=this.vertex,e=this.geometry,s=e.arraysByName[this.VERTEX_POSITION],n=s.data;return n[i+1]=t,this},setZ:function(t){var i=this.vertex,e=this.geometry,s=e.arraysByName[this.VERTEX_POSITION],n=s.data;return n[i+2]=t,this},reset:function(){var t=this.vertex,i=this.geometry,e=i.arraysByName[this.VERTEX_POSITION],s=e.data,n=this.original;return s[t]=n[0],s[t+1]=n[1],s[t+2]=n[2],this},collapse:function(){var t=this.vertex,i=this.geometry,e=i.arraysByName[this.VERTEX_POSITION],s=e.data;return this.original=new h([s[t],s[t+1],s[t+2]]),this},getValue:function(t){var i=this.vertex,r=this.geometry,h=r.arraysByName[this.VERTEX_POSITION],o=h.data;switch(t){case e:return o[i];case s:return o[i+1];case n:return o[i+2]}return 0},setValue:function(t,i){var r=this.vertex,h=this.geometry,o=h.arraysByName[this.VERTEX_POSITION],a=o.data,u=!1;switch(t){case e:a[r]=i,u=!0;break;case s:a[r+1]=i,u=!0;break;case n:a[r+2]=i,u=!0}return this},setVector:function(t){var i=this.vertex,e=this.geometry,s=e.arraysByName[this.VERTEX_POSITION],n=s.data,r=t.xyz;return n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],this},getVector:function(){var t=this.vertex,i=this.geometry,e=i.arraysByName[this.VERTEX_POSITION],s=e.data;return new r([s[t],s[t+1],s[t+2]])}});o.prototype.getXYZRef=o.prototype.getXYZ,o.prototype.setXYZRef=o.prototype.setXYZ}(i),!function(t){"use strict";var i=t.VertexJ3D;t.FaceProxy,t.VecArray,t.MeshJ3D=t.Class(t.MeshProxy,{constructor:function(t){this.VERTEX_POSITION=J3D.Mesh.VERTEX_POSITION,this.$super("constructor",t),this.name="MeshJ3D"},VERTEX_POSITION:null,dispose:function(){return this.VERTEX_POSITION=null,this.$super("dispose"),this},setMesh:function(t){this.$super("setMesh",t);var e,s=0,n=t.geometry,r=n.arraysByName[this.VERTEX_POSITION],h=r.data,o=h.length,a=r.itemSize,u=this.vertices;for(s=0;o>s;)e=new i(n,s),u.push(e),s+=a;return this.faces=null,this},update:function(){var t=this.mesh.geometry,i=t.arraysByName[this.VERTEX_POSITION],e=i.data;return t.replaceArray(i,e),this},updateMeshPosition:function(t){var i=this.mesh.position,e=t.xyz;return i.x+=e[0],i.y+=e[1],i.z+=e[2],this}})}(i),!function(t){"use strict";var i=t.Class(t.Library3d,{constructor:function(){this.id="J3D",this.meshClass=t.MeshJ3D,this.vertexClass=t.VertexJ3D}});t.LibraryJ3D=new i}(i),!function(t){"use strict";var i=t.ModConstant,e=i.X,s=i.Y,n=i.Z,r=t.Vector3,h=t.VecArray,o=t.VertexCubicVR=t.Class(t.VertexProxy,{constructor:function(t,i){this.sceneObject=t,this.$super("constructor",i),this.name="VertexCubicVR"},sceneObject:null,dispose:function(){return this.sceneObject=null,this.$super("dispose"),this},setVertex:function(t){return this.vertex=t,this.original=new h(t),this.xyz=new h(t),this},getXYZ:function(){return new h(this.vertex)},getX:function(){return this.vertex[0]},getY:function(){return this.vertex[1]},getZ:function(){return this.vertex[2]},setXYZ:function(t){var i=this.vertex;return i[0]=t[0],i[1]=t[1],i[2]=t[2],this},setX:function(t){var i=this.vertex;return i[0]=t,this},setY:function(t){var i=this.vertex;return i[1]=t,this},setZ:function(t){var i=this.vertex;return i[2]=t,this},reset:function(){var t=this.vertex,i=this.original;return t[0]=i[0],t[1]=i[1],t[2]=i[2],this},collapse:function(){return this.original=new h(this.vertex),this},getValue:function(t){var i=this.vertex;switch(t){case e:return i[0];case s:return i[1];case n:return i[2]}return 0},setValue:function(t,i){var r=this.vertex,h=!1;switch(t){case e:r[0]=i,h=!0;break;case s:r[1]=i,h=!0;break;case n:r[2]=i,h=!0}return this},setVector:function(t){var i=this.vertex,e=t.xyz;return i[0]=e[0],i[1]=e[1],i[2]=e[2],this},getVector:function(){return new r(this.vertex)}});o.prototype.getXYZRef=o.prototype.getXYZ,o.prototype.setXYZRef=o.prototype.setXYZ}(i),!function(t){"use strict";var i=t.VertexCubicVR;t.FaceProxy,t.MeshCubicVR=t.Class(t.MeshProxy,{constructor:function(t){this.$super("constructor",t),this.name="MeshCubicVR"},setMesh:function(t){this.$super("setMesh",t);var e,s=0,n=t.obj.points,r=n.length,h=t.obj.faces,o=(h.length,this.vertices);for(s=0;r>s;)e=new i(t,n[s]),o.push(e),s++;return this.faces=null,this},update:function(){return this.mesh.dirty=!0,this},updateMeshPosition:function(t){var i=this.mesh.position,e=t.xyz;return i[0]+=e[0],i[1]+=e[1],i[2]+=e[2],this}})}(i),!function(t){"use strict";var i=t.Class(t.Library3d,{constructor:function(){this.id="CubicVR.js",this.meshClass=t.MeshCubicVR,this.vertexClass=t.VertexCubicVR}});t.LibraryCubicVR=new i}(i),!function(t){"use strict";var i=t.ModConstant,e=i.X,s=i.Y,n=i.Z,r=t.Vector3,h=t.VecArray,o=t.VertexCopperlicht=t.Class(t.VertexProxy,{constructor:function(t,i,e){this.node=t,this.buffer=i,this.$super("constructor",e),this.name="VertexCopperlicht"},node:null,buffer:null,dispose:function(){return this.node=null,this.buffer=null,this.$super("dispose"),this},setVertex:function(t){var i=t.Pos;return this.vertex=t,this.original=new h([i.X,i.Y,i.Z]),this.xyz=new h(this.original),this},getXYZ:function(){var t=this.vertex.Pos;return new h([t.X,t.Y,t.Z])},getX:function(){return this.vertex.Pos.X},getY:function(){return this.vertex.Pos.Y},getZ:function(){return this.vertex.Pos.Z},setXYZ:function(t){var i=this.vertex.Pos;return i.X=t[0],i.Y=t[1],i.Z=t[2],this},setX:function(t){var i=this.vertex.Pos;return i.X=t,this},setY:function(t){var i=this.vertex.Pos;return i.Y=t,this},setZ:function(t){var i=this.vertex.Pos;return i.Z=t,this},reset:function(){var t=this.vertex.Pos,i=this.original;return t.X=i[0],t.Y=i[1],t.Z=i[2],this},collapse:function(){var t=this.vertex.Pos;return this.original=new h([t.X,t.Y,t.Z]),this},getValue:function(t){var i=this.vertex.Pos;switch(t){case e:return i.X;case s:return i.Y;case n:return i.Z}return 0},setValue:function(t,i){var r=this.vertex.Pos,h=!1;switch(t){case e:r.X=i,h=!0;break;case s:r.Y=i,h=!0;break;case n:r.Z=i,h=!0}return this},setVector:function(t){var i=this.vertex.Pos,e=t.xyz;return i.X=e[0],i.Y=e[1],i.Z=e[2],this},getVector:function(){var t=this.vertex.Pos;return new r([t.X,t.Y,t.Z])}});o.prototype.getXYZRef=o.prototype.getXYZ,o.prototype.setXYZRef=o.prototype.setXYZ}(i),!function(t){"use strict";var i=t.VertexCopperlicht;t.FaceProxy,t.MeshCopperlicht=t.Class(t.MeshProxy,{constructor:function(t){this.$super("constructor",t),this.name="MeshCopperlicht"},setMesh:function(t){this.$super("setMesh",t);var e,s,n,r,h,o=this.mesh.getMesh().GetMeshBuffers(),a=this.vertices,u=[];for(s=0,n=o.length;n>s;s++)for(u=o[s].Vertices,e=0,r=u.length;r>e;e++)h=new i(this.mesh,o[s],u[e]),a.push(h);return this.faces=null,this},update:function(){for(var t=this.mesh.getMesh().GetMeshBuffers(),i=t.length,e=0;i>e;)t[e].update(!0),e++;return this},updateMeshPosition:function(t){var i=this.mesh.Pos,e=t.xyz;return i.X+=e[0],i.Y+=e[1],i.Z+=e[2],this}})}(i),!function(t){"use strict";var i=t.Class(t.Library3d,{constructor:function(){this.id="Copperlicht",this.meshClass=t.MeshCopperlicht,this.vertexClass=t.VertexCopperlicht}});t.LibraryCopperlicht=new i}(i),!function(t){"use strict";var i=t.ModConstant,e=i.X,s=i.Y,n=i.Z,r=t.Vector3,h=t.VecArray,o=t.VertexPre3D=t.Class(t.VertexProxy,{constructor:function(t){this.$super("constructor",t),this.name="VertexPre3D"},setVertex:function(t){return this.vertex=t,this.original=new h([t.x,t.y,t.z]),this.xyz=new h(this.original),this},getXYZ:function(){var t=this.vertex;return new h([t.x,t.y,t.z])},getX:function(){return this.vertex.x},getY:function(){return this.vertex.y},getZ:function(){return this.vertex.z},setXYZ:function(t){var i=this.vertex;return i.x=t[0],i.y=t[1],i.z=t[2],this},setX:function(t){return this.vertex.x=t,this},setY:function(t){return this.vertex.y=t,this},setZ:function(t){return this.vertex.z=t,this},getValue:function(t){var i=this.vertex;switch(t){case e:return i.x;case s:return i.y;case n:return i.z}return 0},setValue:function(t,i){var r=this.vertex;switch(t){case e:r.x=i;break;case s:r.y=i;break;case n:r.z=i}return this},setVector:function(t){var i=this.vertex,e=t.xyz;return i.x=e[0],i.y=e[1],i.z=e[2],this},getVector:function(){var t=this.vertex;return new r([t.x,t.y,t.z])}});o.prototype.getXYZRef=o.prototype.getXYZ,o.prototype.setXYZRef=o.prototype.setXYZ}(i),!function(t){"use strict";var i=t.VertexPre3D;t.FaceProxy,t.MeshPre3D=t.Class(t.MeshProxy,{constructor:function(t){this.$super("constructor",t),this.name="MeshPre3D"},setMesh:function(t){this.$super("setMesh",t);var e,s,n=this.mesh.vertices,r=this.mesh.quads,h=n.length,o=(r.length,this.vertices);for(e=0;h>e;e++)s=new i(n[e]),o.push(s);return this.faces=null,this}})}(i),!function(t){"use strict";var i=t.Class(t.Library3d,{constructor:function(){this.id="pre3d.js",this.meshClass=t.MeshPre3D,this.vertexClass=t.VertexPre3D}});t.LibraryPre3D=new i}(i),i});